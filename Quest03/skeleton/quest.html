<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      .square {
        width: 100px;
        height: 100px;
        border: 1px dashed black;
        display: inline-block;
        margin: 20px;
      }

      .enabled {
        background-color: limegreen;
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <section class="row1">
      <div class="square"></div>
      <div class="square"></div>
      <div class="square"></div>
      <div class="square"></div>
    </section>

    <section class="row2">
      <div class="square"></div>
      <div class="square"></div>
      <div class="square"></div>
      <div class="square"></div>
    </section>

    <script>
      var row1Squares = document.querySelectorAll('.row1 .square');
      for (var node of row1Squares) {
        /* TODO: node 변수를 어떻게 조작해야 할까요? */
        node.addEventListener('click', function (e) {
          var currentBackgroundColor = e.target.style.backgroundColor;
          e.target.style.backgroundColor =
            currentBackgroundColor === 'yellow' ? 'white' : 'yellow';
        });
      }

      var row2Squares = document.querySelectorAll('.row2 .square');
      for (var node of row2Squares) {
        /* TODO: node 변수를 어떻게 조작해야 할까요? */
        // case 1 : this 또는 e.target을 활용
        // node.addEventListener('click', function (e) {
        //   changeClass(this);
        //   changeClass(e.target);
        // });
        //
        // case 2 : bind를 통해 this를 변경하여 해결
        // node.addEventListener('click', changeClassWithBind.bind(node));
        //
        // case 3 : 매개변수를 통해 node의 scope를 한정하여 해결
        addClickEvent(node);
      }

      function changeClass(node) {
        var currentClassList = node.classList;
        currentClassList.contains('enabled')
          ? currentClassList.remove('enabled')
          : currentClassList.add('enabled');
      }

      function changeClassWithBind() {
        var currentClassList = this.classList;
        currentClassList.contains('enabled')
          ? currentClassList.remove('enabled')
          : currentClassList.add('enabled');
      }

      function addClickEvent(node) {
        node.addEventListener('click', function () {
          var currentClassList = node.classList;
          currentClassList.contains('enabled')
            ? currentClassList.remove('enabled')
            : currentClassList.add('enabled');
        });
      }
    </script>
    <script src="star.js"></script>
  </body>
</html>
